<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тренажер: Дифференцирование</title>
    
    <!-- Библиотеки -->
    <script defer src="https://unpkg.com/mathlive"></script>
    <script src="https://cdn.jsdelivr.net/npm/algebrite@1.3.1/dist/algebrite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div class="header">
        <select id="variant-select" class="variant-selector"></select>
        <div class="task-counter" id="task-counter">Задача 1 из 5</div>
    </div>
    
    <div id="math-display" class="math-expression"></div>
    
    <math-field id="user-answer" virtual-keyboard-mode="manual" placeholder="Введите производную..."></math-field>

    <div class="keyboard" id="math-keyboard">
        <!-- Цифры и знаки -->
        <button class="key" data-cmd="1">1</button>
        <button class="key" data-cmd="2">2</button>
        <button class="key" data-cmd="3">3</button>
        <button class="key special" data-cmd="+">+</button>
        <button class="key special" data-cmd="-">-</button>
        
        <button class="key" data-cmd="4">4</button>
        <button class="key" data-cmd="5">5</button>
        <button class="key" data-cmd="6">6</button>
        <button class="key special" data-cmd="*">×</button>
        <button class="key special" data-latex="\frac{#?}{#?}">/</button>
        
        <button class="key" data-cmd="7">7</button>
        <button class="key" data-cmd="8">8</button>
        <button class="key" data-cmd="9">9</button>
        <button class="key" data-cmd="(">(</button>
        <button class="key" data-cmd=")">)</button>
        
        <button class="key" data-cmd="0">0</button>
        <button class="key" data-cmd="x">x</button>
        <button class="key" data-latex="^{#?}">^</button>
        <button class="key" data-latex="\sqrt{#?}">√</button>
        <button class="key" id="backspace">←</button>

        <!-- Функции -->
        <button class="key" data-latex="\sin\left(#?\right)">sin</button>
        <button class="key" data-latex="\cos\left(#?\right)">cos</button>
        <button class="key" data-latex="\ln\left(#?\right)">ln</button>
        <button class="key" id="enter-key">Enter</button>
    </div>

    <div id="feedback" class="feedback"></div>

    <div class="stats">
        <span id="score-display">Правильно: 0</span>
        <span id="attempts-display">Списываний: 0</span>
    </div>
</div>

<style>
    :root {
        --primary: #007bff; --success: #28a745; --danger: #dc3545;
        --bg: #f4f7f9; --card-bg: #ffffff; --radius: 12px;
    }
    body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
    .container { background: var(--card-bg); padding: 25px; border-radius: var(--radius); box-shadow: 0 8px 30px rgba(0,0,0,0.08); width: 90%; max-width: 450px; }
    
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .variant-selector { padding: 8px; border-radius: 6px; border: 1px solid #ddd; font-size: 0.9rem; outline: none; }
    .task-counter { font-size: 0.9rem; color: #666; font-weight: 600; }

    .math-expression { font-size: 1.8rem; margin: 20px 0; padding: 20px; background: #fafafa; border: 1px solid #eee; border-radius: 10px; text-align: center; min-height: 60px; }
    
    math-field { width: 100%; font-size: 1.4rem; border: 2px solid #e0e0e0; border-radius: 8px; margin-bottom: 20px; background: white; outline: none; }
    math-field:focus-within { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(0,123,255,0.1); }

    .keyboard { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
    .key { padding: 15px 5px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer; font-size: 1.1rem; transition: all 0.1s; display: flex; align-items: center; justify-content: center; }
    .key:hover { background: #f1f3f5; border-color: #dee2e6; }
    .key:active { background: #e9ecef; transform: translateY(1px); }
    .key.special { background: #f0f7ff; color: #007bff; font-weight: bold; }
    #backspace { background: #fff5f5; color: #fa5252; }
    #enter-key { background: var(--success); color: white; grid-column: span 2; font-weight: bold; }
    #enter-key:hover { background: #218838; }

    .feedback { margin-top: 15px; padding: 12px; border-radius: 8px; text-align: center; font-weight: 600; display: none; animation: slideIn 0.3s ease; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    .stats { display: flex; justify-content: space-between; margin-top: 25px; pt: 15px; border-top: 1px solid #eee; color: #888; font-size: 0.85rem; }
</style>

<script src="script.js"></script>
</body>
</html>
